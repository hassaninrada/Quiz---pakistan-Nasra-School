<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Results</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="result-page">

<!-- Nasra School Logo (Top-Left) -->
<div class="nasra-logo">
  <img src="https://nasraschool.edu.pk/wp-content/uploads/2024/03/logo.webp" alt="Nasra Logo">
</div>

<!-- Pakistan Flag (Top-Right) -->
<div class="pakistan-flag">
  <img src="https://upload.wikimedia.org/wikipedia/commons/3/32/Flag_of_Pakistan.svg" alt="Pakistan Flag">
</div>

<div class="container">
  <h2>Quiz Results</h2>
  <select id="classFilter" onchange="filterResults()">
    <option value="all">All Classes</option>
    <option value="6">Class 6</option>
    <option value="7">Class 7</option>
    <option value="8">Class 8</option>
    <option value="9">Class 9</option>
    <option value="10">Class 10</option>
  </select>
  <canvas id="barChart"></canvas>
  <button onclick="downloadCSV()">Download CSV</button>
  <button onclick="confirmDeleteAll()">Delete All</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="result.js"></script>

<script>
function saveScore(score) {
  const scriptURL = "https://script.google.com/macros/s/AKfycbwnWWWX-XVnsHs-GPFdoLsDaVYCRzQak6BKBSWn3eibl1N21bO-t8HCIcI95iRnlHMV/exec";

  // Get saved login data
  const studentData = JSON.parse(localStorage.getItem("studentData") || "{}");
  if (!studentData.name || !studentData.studentClass) {
    alert("Student information missing â€” please log in first.");
    return;
  }

  // Send to Google Sheet
  fetch(scriptURL, {
    method: "POST",
    body: new URLSearchParams({
      Name: studentData.name,
      Class: studentData.studentClass,
      Score: score,
      Date: new Date().toISOString()
    }),
    headers: { "Content-Type": "application/x-www-form-urlencoded" }
  })
  .then(() => {
    console.log("Score submitted successfully");
  })
  .catch(error => {
    console.error("Error submitting score:", error);
  });
}

// Example: call this when the quiz ends
// saveScore(finalScore);
</script>

</body>
</html>
