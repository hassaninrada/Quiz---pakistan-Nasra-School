<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Students Scoring 30 by Class (Interactive)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9fbff;
    }
    header {
      padding: 10px;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
    }
    #chart {
      width: 100%;
      height: 75vh;
    }
  </style>
</head>
<body>
  <header>Students Scoring 30 by Class (6â€“10)</header>
  <div id="chart"></div>
  <script>
    const rows = [
      ["Uzair-ud-Din", 10, 30], ["Emaan Fatima", 8, 30], ["M. Shahzain", 6, 30],
      ["Zainab Abdullah", 6, 30], ["Ajwa zahra", 6, 30], ["Tehreem Iqbal", 9, 30],
      ["Zainab Abdul Qadir", 9, 30], ["Naksh", 6, 30], ["Muhammad Nabeel", 6, 30],
      ["Hassaninrada", 10, 30], ["Mohammed bin Munazzam", 9, 30], ["Abdullah Masood", 8, 30],
      ["Hasnain", 8, 30], ["Barqa", 9, 30], ["Hassan Farhan", 9, 30], ["Tehreem Iqbal", 9, 30],
      ["Hamza", 8, 30], ["Alisha ashok", 8, 30], ["Maryam moeen", 7, 30], ["M.abban khan", 9, 30],
      ["Hassan Farhan", 9, 30], ["Hamza", 8, 30], ["M.abban khan", 9, 30], ["Vedika", 9, 30],
      ["Abdul Rafay Kashif", 6, 30], ["Sudais irshad", 9, 30], ["Vedika", 9, 30],
      ["Vedika", 9, 30], ["Vedika Kumari", 9, 30], ["Adina farhat", 6, 30], ["Adina farhat", 6, 30]
    ];

    const allowedClasses = [6, 7, 8, 9, 10];
    const byClass = {};
    rows.forEach(([name, cls, score]) => {
      if (score === 30 && allowedClasses.includes(cls)) {
        if (!byClass[cls]) byClass[cls] = [];
        byClass[cls].push(name); // keep all attempts, even duplicates
      }
    });

    const x = [];
    const y = [];
    const hoverText = [];
    const colors = ["#FF9999", "#66B2FF", "#99FF99", "#FFCC99", "#C299FF"];

    allowedClasses.forEach((cls, i) => {
      const names = byClass[cls] || [];
      x.push(String(cls));
      y.push(names.length);
      hoverText.push(`<b>Class ${cls}</b><br>${names.join("<br>") || "No students"}`);
    });

    Plotly.newPlot("chart", [{
      type: "bar",
      x,
      y,
      marker: { color: colors },
      text: y.map(String),
      textposition: "outside",
      hoverinfo: "text",
      hovertext: hoverText
    }], {
      title: "Students Scoring 30 by Class",
      xaxis: { title: "Class" },
      yaxis: { title: "Number of Attempts", rangemode: "tozero" },
      margin: { t: 50, l: 50, r: 20, b: 50 }
    }, { responsive: true });
  </script>
</body>
</html>
