<!DOCTYPE html>
<html>
<head>
  <title>Quiz</title>
  <style>
    body { font-family: Arial; }
    .quiz-container { max-width: 600px; margin: auto; }
    .question { font-size: 18px; margin-bottom: 10px; }
    .option { display: block; margin: 5px 0; }
    #result { font-size: 20px; font-weight: bold; margin-top: 20px; }
  </style>
</head>
<body>

<div class="quiz-container">
  <h2>Quiz</h2>
  <div id="quizContent"></div>
  <button id="nextBtn" onclick="nextQuestion()">Next</button>
  <div id="result"></div>
</div>

<script>
  const questions = [
    {
      q: "What is the capital of Pakistan?",
      options: ["Karachi", "Islamabad", "Lahore", "Quetta"],
      answer: 1
    },
    {
      q: "2 + 2 = ?",
      options: ["3", "4", "5", "6"],
      answer: 1
    },
    {
      q: "Which is the largest ocean?",
      options: ["Atlantic", "Pacific", "Indian", "Arctic"],
      answer: 1
    }
  ];

  let currentQ = 0;
  let score = 0;
  let selected = null;

  const quizContent = document.getElementById("quizContent");
  const nextBtn = document.getElementById("nextBtn");
  const resultDiv = document.getElementById("result");

  function loadQuestion() {
    if (currentQ < questions.length) {
      const qObj = questions[currentQ];
      let html = `<div class='question'>${qObj.q}</div>`;
      qObj.options.forEach((opt, i) => {
        html += `<label class='option'><input type='radio' name='option' value='${i}'> ${opt}</label>`;
      });
      quizContent.innerHTML = html;
    } else {
      showResult();
    }
  }

  function nextQuestion() {
    const selectedOption = document.querySelector("input[name='option']:checked");
    if (!selectedOption) {
      alert("Please select an answer!");
      return;
    }

    if (parseInt(selectedOption.value) === questions[currentQ].answer) {
      score++;
    }

    currentQ++;
    loadQuestion();
  }

  function showResult() {
    quizContent.innerHTML = "";
    nextBtn.style.display = "none";
    resultDiv.innerHTML = `Your Score: ${score}/${questions.length}`;
    sendToSheet();
  }

  function sendToSheet() {
    const name = localStorage.getItem("studentName") || "Unknown";
    const studentClass = localStorage.getItem("studentClass") || "Unknown";

    fetch("https://script.google.com/macros/s/AKfycbyWQvzbwnrv9cgcRSEW-Nw9IYR3fUEUvEFkyfQD8yFHN0eaWK9ksDsWax9VTOjqn4cp/exec", {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name: name, class: studentClass, score: score })
    });
  }

  loadQuestion();
</script>

</body>
</html>
